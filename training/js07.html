<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://img_width1w.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://img_width1w.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript">
$( function(){
	var $dot_list     = $('<div class="dot_list"></div>'),
		$left_arrow   = $('<div class="left"></div>'),
		$right_arrow  = $('<div class="right"></div>');
		$('.div1').after($dot_list);
		$('#xxx').append($left_arrow).append($right_arrow);
		
	var $d1_ul        = $('.div1 ul') ,
		$d1_li        = $('.div1 li') ;
		$d1_li.first()
			  .clone()
			  .appendTo($d1_ul);
	var img_width1    = $d1_li.eq( 0 )
									 .find('img')
									 .width() ,
		number        = 0 ,
		nub           = 0 ,
		li_length     = $d1_li.length + 1 ,
		ul_width_ture = ( li_length - 1 ) * img_width1 ,
		div1_ul_width = img_width1*li_length ;
		
	$d1_li.each(function(){
		if( nub == ( li_length - 1 ) ){
			return false;
		}else{
			$span1  = $('<span></span>');
			$span1.appendTo($dot_list);
			nub++;
		};
	});
	
	var $dot_list_span = $dot_list.find('span') ;//原来申明的位置不动所以取不到他的长度
		//var ss       = $dot_list.children("span").length;
		//alert(ss);
		$d1_ul.css({
			width:div1_ul_width + 'px'
		});
		$dot_list_span.first().addClass('index1');
		$('.right').bind('click',turn_right);
		$('.left').bind('click',turn_left);
	
	function turn_right(){
				ul_left = $d1_ul.css('left');
		if( !$d1_ul.is(':animated') ){
			if( ul_left == ( - ( li_length - 1 ) * img_width1 ) + 'px' ){
				$d1_ul.css({
					left: 0
				}).stop()
				  .animate({
					  left: - img_width1
				});
			}else{
				$d1_ul.stop()
					  .animate({
						  left:'-=' + img_width1
				});
			};
			if( number == li_length - 2 ){
				number =  0 ;
				$dot_list_span.eq(number)
						.addClass('index1')
						.siblings()
						.removeClass('index1');
			}else{
				++number ;
				$dot_list_span.eq(number)
						.addClass('index1')
						.siblings()
						.removeClass('index1');
			};
		}else{
			return false;
		};
	};
	function turn_left(){
				ul_left = $d1_ul.css('left');
		if( !$d1_ul.is(':animated') ){
			if( ul_left == ( 0 + 'px' ) ){
				$d1_ul.css({
					left: - ul_width_ture
				}).stop()
				  .animate({
					  left: - ul_width_ture + img_width1
				});
			}else{
				$d1_ul.stop()
					  .animate({
						  left:'+=' + img_width1
				});
			};
			if( number == 0 ){
				number = li_length - 2 ;
				$dot_list_span.eq(number)
						.addClass('index1')
						.siblings()
						.removeClass('index1');
			}else{
				--number ;
				$dot_list_span.eq(number)
						.addClass('index1')
						.siblings()
						.removeClass('index1');
			};
		}else{
			return false;
		};
	};
	function dot_list(){
			ul_left = $d1_ul.css('left');
		if( ul_left == ( - ul_width_ture + 'px') ){
			$d1_ul.css({
				left: 0
			}).stop()
			  .animate({
				  left: - img_width1
			});
		}else{
			$d1_ul.stop()
						 .animate({
							 left:'-=' + img_width1
			});
		};
		if( number == li_length - 2 ){
			number =  0 ;
			$dot_list_span.eq(number)
					.addClass('index1')
					.siblings()
					.removeClass('index1');
		}else{
			++number ;
			$dot_list_span.eq(number)
					.addClass('index1')
					.siblings()
					.removeClass('index1');
		};
	};
	$dot_list_span.each( function(index,item){
		$(item).mouseenter(function(){
			$d1_ul.stop().animate({
				left: - (index) * img_width1
			});
			$(item).addClass('index1')
				   .siblings()
				   .removeClass('index1');
			number = index ;
		});
	});
	
	/*var t = setInterval( dot_list , 3000 ) ;
	$('#xxx').hover( function(){
		clearInterval(t);
	},function(){
		t =setInterval( dot_list , 3000 );
	});*/
	
	
	
	
	
	
	
	var self = 0 ;
	$('ul.a_href li').each(function(index,item){
		$(item).bind('click',change_width);
	});
	
	function change_width(e){
		var $d3_inner            = $('.div3_inner') ,
			$link                = $(this) ,
			$link_title          = $link.find('img').attr('src') ,
			 idx                 = $link.index() ;
		
		//alert(idx)
		if(self == idx) return false ;
		
		
			
		if( $d3_inner.children().length > 1 ){
			$d3_inner.children(':last').remove();
		};
		//alert(99)
		var $find_img            = $d3_inner.find('img') ,
			 current_image_width = $find_img.width() ,
			$new_img             = $('<img />').css({
			left:current_image_width + 'px'
		}).attr('src',$link_title) ;
		//alert(0)
		var sss = function abc(){alert($('.div3').width())}
		
		$new_img.prependTo($d3_inner);
				
		var new_img_width        = $new_img.width() ,
			new_img_height       = $new_img.height() ;
		
		if(self > idx){
			$new_img.css({
				left: - new_img_width + 'px'
			});
			current_image_width  = - new_img_width ;
		}
		
		
		$('.div3').stop().animate({
			width:new_img_width + 'px',
			height:new_img_height + 'px'
		});
		//alert(new_img_width)
		$new_img.stop()
		  		.animate({
					left: '0px'
		});
		
		
		$find_img.stop().animate({
			left: - current_image_width +'px'
		});
		
		self = idx ;
		
		e.preventDefault();
	};
			
		
		
	

	
	
	
} );
/*for (i=0;i<10;i++){
		alert(i);
	}*/
</script>
<style type="text/css">
*{ margin:0; padding:0; }
li,dl{ list-style:none; }

#xxx{ background:#666; height:300px; width:500px; margin:0 auto; position:relative; }
.div1{ width:176px; overflow:hidden; margin:0 auto; }
.div1 ul{ position:relative; }
.div1 li{ float:left; }
span{ font-size:22px; margin:0 20px; }
.dot_list{ margin:50px 0 0 0; }
.dot_list span{ display:block; height:11px; width:11px; background:url(img/dot.png) no-repeat; float:left; margin:0 5px; text-indent:-99px; overflow:hidden; cursor:pointer; }
.dot_list .index1{ background:url(img/dot.png) no-repeat 0 -11px; }
/*.dot_list li:hover{ background:#930; cursor:pointer; color:#FFF; }*/
.left{width:35px; height:35px; background:url(img/sports_m_02_1.png) no-repeat; cursor:pointer; position:absolute; top:40%; left:10px;}
.right{width:35px; height:35px; background:url(img/sports_m_03_1.png) no-repeat; cursor:pointer; position:absolute; top:40%; right:10px;}





.div3{ position:relative; height:450px; width:680px; overflow:hidden; margin:0 auto; }
.div3_inner{ width:2000px; height:450px; }
.div3_inner img{ position:absolute; }
ul.a_href a{ cursor:pointer; }
ul.a_href a img{ display:none; }

</style>
</head>

<body>
<div id="xxx">
<div class="div1">
	<ul>
		<li><a><img src="img/pic4-2.jpg" /></a></li>
		<li><a><img src="img/pic4-3.jpg" /></a></li>
		<li><a><img src="img/pic4-4.jpg" /></a></li>
		<li><a><img src="img/pic4-5.jpg" /></a></li>
	</ul>
</div>

<!--<div class="dot_list">
	<ul>
		<li>1</li>
		<li>2</li>
		<li>3</li>
		<li>4</li>
	</ul>
</div>-->
<!--<div><span class="left">left</span><span class="right">right</span></div>-->
</div>


<div style="clear:both;"></div>





<div class="div3_warp">
<div class="div3">
	<div class="div3_inner"><img src="img/1.jpg" /></div>
</div>
<ul class="a_href">
	<li><a href="img/1.jpg"><img src="img/1.jpg" />pic1</a></li>
	<li><a href="img/7.jpg"><img src="img/7.jpg" />pic2</a></li>
	<li><a href="img/2.jpg"><img src="img/2.jpg" />pic3</a></li>
	<li><a href="img/10.jpg"><img src="img/10.jpg" />pic4</a></li>
	<li><a href="img/4.jpg"><img src="img/4.jpg" />pic5</a></li>
	<li><a href="img/31.jpg"><img src="img/31.jpg" />pic6</a></li>
</ul>
</div>
<!--<div class="d2"><span class="left2">left2</span><span class="right2">right2</span></div>-->
<!--<script defer type="text/javascript" charset="utf-8" src="http://julying.com/lab/weather/get/jquery.weather!&zIndex=1&move=true&autoDrop=true&jquery=1.8.1&style=default&area=client&city=101020100"></script>-->
</body>
</html>
