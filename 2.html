<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
    body{text-align: center;}
    #text{background: #03a9f4;font-size: 22px;}
    </style>
    <script src="./src/js/libs/ecma.js"></script>
</head>

<body>
<div id="div">
    <div id="runState">运行状态</div>
    <div id="deleteState">删除状态</div>
    <div id="addState">添加状态</div>
    <div id="replaceState">替换状态</div>
    <div id="setState">设置当前状态</div>
    <div id="text"></div>
    <hr>






    <select name="" id="select1">
        <option value="0">1111111</option>
        <option value="1">2222222222</option>
        <option value="2">3233333333333333</option>
        <option value="3">4344444444444444444444</option>
    </select>
    <select name="" id="select2"></select>
    <select name="" id="select3"></select>
    <select name="" id="select4">
        <option value="">我是一，我需要多才能触发</option>
        <option value="">bbbbbbbbbbb</option>
        <option value="">cccccccccccc</option>
        <option value="">dddddddddddd</option>
        <option value="">eeeeeeeeeee</option>
    </select>
    <h1>ul1</h1>
    <ul id="list1"></ul>
    <h1>ul2</h1>
    <ul id="list2"></ul>
</div>
<script>

// demo2
var bigObj = [{
        relationName : 'selector2GetData',
        content : function list1GetData (a, b, c) {
            var h = _.randomNumber();
            var li = '';
            for (var i = 0; i < h; i++) li += '<li>' + _.randomNumber(_.randomNumber()) +'</li>';
            list1.innerHTML = li;
            console.log('list1GetData');
            return [a + 1, b + 1, c + 1];
        }
    }, {
        relationName : 'changeSelector2BackgroundColor',
        content : function selector1ChangeColor () {
            select1.style.backgroundColor = _.randomColor();
        }, 
    }, {
        content : function selector1ChangeSelector1FontSize (a, b, c) {
            select1.style.fontSize = '22px';
            return [a + 1, b + 1, c +1];
        }
    }, {
        relationName : 'changeUl1BackgroundColor',
        content : function selector2GetData (a, b, c) {
            var that = this;
            var h = _.randomNumber();
            var option = '';
            for (var i = 0; i < h; i++) option += '<option value="' + i + '">' + _.randomNumberAlphabet(10) + '</option>'
            select2.innerHTML = option;
            select2.onchange = function () {
                that.list2GetData();
            };
            console.log('selector2GetData', a, b, c);
            return [a + 1, b + 1, c + 1];
        },
    }, {
        relationName : 'changeUl1BackgroundColor',
        content : function changeSelector2BackgroundColor () {
            select2.style.backgroundColor = _.randomColor();
        },
    }, {
        content : function changeBodyBackgroundColor () {
            document.body.style.backgroundColor = _.randomColor();
        },
    }, {
        content : function changeUl1BackgroundColor (a, b, c) {
            list1.style.backgroundColor = _.randomColor();
            console.log('changeUl1BackgroundColor', a, b, c);
        },
    }, {
        content : function changeUl2BackgroundColor2 () {
            list2.style.backgroundColor = 'yellow';
        },
    }, {
        relationName : 'select3GetData',
        content : function list2GetData (a, b, c) {
            var h = _.randomNumber();
            var li = '';
            for (var i = 0; i < h; i++) li += '<li>' + _.randomNumber(_.randomNumber()) +'</li>';
            list2.innerHTML = li;
            return [a + 1, b + 1, c + 1];
        }
    }, {
        content : function select3GetData (a, b, c) {
            var that = this;
            var h = _.randomNumber();
            var option = '';
            for (var i = 0; i < h; i++) option += '<option value="">' + _.randomNumberAlphabet(10) + '</option>'
            select3.innerHTML = option;
            select3.onchange = function () {
                that.select4ChangeBorderColor();
            };
            return [a + 1, b + 1, c + 1];
        },
    }, {
        content : function select4ChangeBorderColor (a, b, c) {
            select4.style.border = '10px solid ' + _.randomColor();
            console.log('select4ChangeBorderColor');
        }
}];


var haha = _.createRelation(bigObj);



select1.onchange = function () {
    haha.list1GetData(1, 2, 3);
}



















</script>


</body>
</html>

<script>


runState.onclick = function () {
    obj.currState(true);
};
// yes
deleteState.onclick = function () {
    obj.deleteState(t4);
};
// no
addState.onclick = function () {
    // yes
    // obj.addState(s1);
    // no
    obj.addState(s1, t2);
};
// yes
replaceState.onclick = function () {
    obj.replaceState(s2, t2);
};
// yes
setState.onclick = function () {
    obj.setState(t2);
};




function s1 () {
    text.innerHTML = '我是添加的';
};

function s2 () {
    text.innerHTML = '我是替换的';
};



function t1 () {
    text.innerHTML = 1;
};

function t2 () {
    text.innerHTML = 2;
};

function t3 () {
    text.innerHTML = 3;
};

function t4 () {
    text.innerHTML = 4;
};

function t5 () {
    text.innerHTML = 5;
};

var obj = _.state(t1, t2, t3, t4, t5);











</script>